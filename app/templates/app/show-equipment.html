{% extends "app/base1.html" %} {% load static %} {% block content %}

<div class="main-content">
  <div class="page-content">
    <!-- Tabs -->
    <ul class="nav nav-tabs mb-4" id="equipmentTabs" role="tablist">
      <li class="nav-item">
        <button
          class="nav-link active"
          data-bs-toggle="tab"
          data-bs-target="#tabAll"
        >
          All Equipments
        </button>
      </li>
      <li class="nav-item">
        <button
          class="nav-link"
          data-bs-toggle="tab"
          data-bs-target="#tabMaintenance"
        >
          Under Maintenance
        </button>
      </li>
      <li class="nav-item">
        <button
          class="nav-link"
          data-bs-toggle="tab"
          data-bs-target="#tabExpired"
        >
          Expired Maintenance
        </button>
      </li>
    </ul>

    <div class="tab-content">
      <!-- All Equipments -->
      <div class="tab-pane fade show active" id="tabAll">
        <div class="card">
          <div class="card-header bg-primary text-white">All Equipments</div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered table-hover align-middle">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Brand</th>
                    <th>Purchase Date</th>
                    <th>Status</th>
                    <th>Location</th>
                    <th>Maintenance Date</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  {% for e in all_equipment %}
                  <tr>
                    <td>{{ e.id }}</td>
                    <td>
                      {% if e.image %}
                      <img
                        src="{{ e.image.url }}"
                        width="50"
                        height="50"
                        class="img-thumbnail"
                      />
                      {% else %}
                      <span>No Image</span>
                      {% endif %}
                    </td>
                    <td>{{ e.equipment_name }}</td>
                    <td>{{ e.category }}</td>
                    <td>{{ e.brand }}</td>
                    <td>{{ e.purchase_date }}</td>
                    <td>{{ e.status }}</td>
                    <td>{{ e.location }}</td>
                    <td>{{ e.maintenance_date }}</td>
                    <td>
                      <a href="{% url 'equipment-detail' e.id %}" class="btn btn-info btn-sm">Show</a>

                      <a
                        href="{% url 'delete-equipment' e.id %}"
                        onclick="return confirm('Are you sure you want to delete this item?')"
                        class="btn btn-danger btn-sm"
                      >
                        Delete
                      </a>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Under Maintenance -->
      <div class="tab-pane fade" id="tabMaintenance">
        <div class="card">
          <div class="card-header bg-warning text-dark">Under Maintenance</div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered table-hover align-middle">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Maintenance Date</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  {% for e in maintenance_equipment %}
                  <tr>
                    <td>{{ e.id }}</td>
                    <td>{{ e.equipment_name }}</td>
                    <td>{{ e.category }}</td>
                    <td>{{ e.maintenance_date }}</td>
                    <td>
                      <a
                        href="{% url 'update-equipment' e.id %}"
                        class="btn btn-sm btn-warning"
                        >Update</a
                      >
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="5">No machines under maintenance</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Expired Maintenance -->
      <div class="tab-pane fade" id="tabExpired">
        <div class="card">
          <div class="card-header bg-danger text-white">
            Expired Maintenance
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered table-hover align-middle">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Expired Date</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  {% for e in expired_equipment %}
                  <tr>
                    <td>{{ e.id }}</td>
                    <td>{{ e.equipment_name }}</td>
                    <td>{{ e.category }}</td>
                    <td>{{ e.maintenance_date }}</td>
                    <td>
                      <a
                        href="{% url 'update-equipment' e.id %}"
                        class="btn btn-sm btn-danger"
                        >Update</a
                      >
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="5">No expired machines</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
